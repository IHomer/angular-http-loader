angular.module("ng.httpLoader",["ng.httpLoader.httpMethodInterceptor"]).directive("ngHttpLoader",["$rootScope","$parse",function(a,b){return{scope:{methods:"@",template:"@",title:"@"},template:'<div ng-include="template" ng-show="showLoader"></div>',link:function(c){var d=b(c.methods)()||c.methods;d=angular.isUndefined(d)?[]:d,d=angular.isArray(d)?d:[d],angular.forEach(d,function(a,b){d[b]=a.toUpperCase()}),Array.prototype.indexOf||(d.indexOf=function(a){for(var b=this.length;b--;)if(this[b]===a)return b;return-1}),c.showLoader=!1;var e=function(a,b){-1!==d.indexOf(b.toUpperCase())?c.showLoader="loaderShow"===a.name:0===d.length&&(c.showLoader="loaderShow"===a.name)};a.$on("loaderShow",e),a.$on("loaderHide",e)}}}]),angular.module("ng.httpLoader.httpMethodInterceptor",[]).provider("httpMethodInterceptor",function(){var a=[];this.whitelistDomain=function(b){a.push(b)},this.$get=["$q","$rootScope",function(b,c){var d=0,e=function(b){for(var c=a.length;c--;)if(-1!==b.indexOf(a[c]))return!0;return!1},f=function(a){e(a.url)&&0===--d&&c.$emit("loaderHide",a.method)};return{request:function(a){return e(a.url)&&(d++,c.$emit("loaderShow",a.method)),a||b.when(a)},response:function(a){return f(a.config),a||b.when(a)},responseError:function(a){return f(a.config),b.reject(a)}}}]}).config(["$httpProvider",function(a){a.interceptors.push("httpMethodInterceptor")}]);